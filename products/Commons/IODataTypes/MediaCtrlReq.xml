<!--
==============================================================================
== Haruka Software Storage.
== Definition of message format expressing control request for media.
-->

<root namespace='Haruka.IODataTypes.MediaCtrlReq' class='ReaderWriter' >
  <form name='MediaCtrlReq'>
    <item name='Request' selection='true' >

      <!-- Request for Debug Media -->
      <item name='Debug' selection='true' >

        <!--
        summary : Request to send all registered traps.
        returns : MediaCtrlRes.AllTraps
        -->
        <item name='GetAllTraps' constraint='unit' />

        <!--
        summary : Request to register a trap.
        returns : MediaCtrlRes.AllTraps
        -->
        <item name='AddTrap' >
          <item name='Event' selection='true'>
            <item name='TestUnitReady' constraint='unit' />
            <item name='ReadCapacity' constraint='unit' />
            <item name='Read' >
              <item name='StartLBA' constraint='unsignedLong' />
              <item name='EndLBA' constraint='unsignedLong' />
            </item>
            <item name='Write' >
              <item name='StartLBA' constraint='unsignedLong' />
              <item name='EndLBA' constraint='unsignedLong' />
            </item>
            <item name='Format' constraint='unit' />
          </item>
          <item name='Action' selection='true'>
            <item name='ACA' constraint='string' />
            <item name='LUReset' constraint='string' />
            <item name='Count' constraint='int' />
            <item name='Delay' constraint='int' />
            <item name='Wait' constraint='unit' />
          </item>
        </item>

        <!--
        summary : Request to clear all registered traps.
        returns : MediaCtrlRes.ClearTrapsResult
        remarks : It does not affect tasks whose execution has been delayed by a Delay action.
                  It does not affect tasks that are waiting to be executed by a Wait action.
                  Resume execution of a waiting task with a release request.
                  Note that a GetTaskWaitStatus and Release request can still be used after clearing all traps.
        -->
        <item name='ClearTraps' constraint='unit' />

        <!--
        summary : Request to get the counter value.
        returns : MediaCtrlRes.CounterValue
        -->
        <item name='GetCounterValue' constraint='int' />

        <!--
        summary : Request to get the task waiting status.
        returns : MediaCtrlRes.TaskWaitStatus
        remarks : The maximum number of tasks that can be responded to is Constatns.DEBUG_MEDIA_MAX_TASK_WAIT_STATUS.
                  If there are too many waiting tasks, the excess will not be returned.
        -->
        <item name='GetTaskWaitStatus' constraint='unit' />

        <!--
        summary : Resume waiting task.
        returns : MediaCtrlRes.ResumeResult
        -->
        <item name='Resume' >
          <item name='TSIH' constraint='TSIH_T' />
          <item name='ITT' constraint='ITT_T' />
        </item>

      </item>
    </item>
  </form>
</root>